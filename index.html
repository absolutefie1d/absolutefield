<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Absolute Field</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script src="https://unpkg.com/marked/marked.min.js"></script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%234a6741'/><path d='M50 25 C35 40, 30 60, 50 75 C70 60, 65 40, 50 25' fill='%23d4e4cf'/><path d='M50 35 L50 65' stroke='%232d3f28' stroke-width='3' stroke-linecap='round'/><path d='M50 45 L40 55' stroke='%232d3f28' stroke-width='2' stroke-linecap='round'/><path d='M50 55 L60 50' stroke='%232d3f28' stroke-width='2' stroke-linecap='round'/></svg>" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-bg: #faf9f7; --color-bg-alt: #f4f2ed; --color-text: #2c3029;
      --color-text-muted: #6b7265; --color-text-light: #9aa093;
      --color-green: #4a6741; --color-green-light: #6b8a5e;
      --color-green-pale: #d4e4cf; --color-green-dark: #2d3f28;
      --color-brown: #8b7355; --color-brown-light: #c4a882;
      --color-cream: #f5f1e8; --color-white: #ffffff;
      --color-border: #e2ded6;
      --shadow-sm: 0 2px 8px rgba(45, 63, 40, 0.06);
      --shadow-md: 0 4px 20px rgba(45, 63, 40, 0.08);
      --shadow-lg: 0 12px 40px rgba(45, 63, 40, 0.12);
      --radius: 12px; --radius-sm: 6px; --transition: 0.3s ease;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Source Sans 3', sans-serif; font-weight: 300; background: var(--color-bg); color: var(--color-text); line-height: 1.7; }

    nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(250, 249, 247, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid var(--color-border); padding: 16px 40px; display: flex; justify-content: space-between; align-items: center; }
    .nav-logo { cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .nav-logo svg { width: 36px; height: 36px; }
    .nav-links { display: flex; gap: 8px; list-style: none; }
    .nav-links a { color: var(--color-text-muted); font-size: 0.9rem; padding: 8px 16px; border-radius: 50px; transition: all var(--transition); cursor: pointer; text-decoration: none; font-family: 'Playfair Display', serif; font-size: 1.1rem; }
    .nav-links a:hover { color: var(--color-green); background: var(--color-green-pale); }
    .nav-links a.active { color: var(--color-white); background: var(--color-green); }

    main { padding-top: 80px; min-height: 100vh; }
    .page { display: none; animation: fadeIn 0.4s ease; }
    .page.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .container { max-width: 1100px; margin: 0 auto; padding: 60px 40px; }

    .page-header { text-align: center; margin-bottom: 48px; }
    .page-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--color-brown); margin-bottom: 12px; }
    .page-title { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 6vw, 3.5rem); color: var(--color-green-dark); }

    .hero { min-height: calc(100vh - 80px); display: flex; align-items: center; justify-content: center; text-align: center; padding: 40px; background: radial-gradient(ellipse at 30% 20%, rgba(212, 228, 207, 0.4) 0%, transparent 50%), radial-gradient(ellipse at 70% 80%, rgba(196, 168, 130, 0.2) 0%, transparent 50%); }
    .hero-content { max-width: 700px; }
    .hero-greeting { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.25em; color: var(--color-brown); margin-bottom: 16px; }
    .hero h1 { font-family: 'Playfair Display', serif; font-size: clamp(3rem, 8vw, 5rem); color: var(--color-green-dark); line-height: 1.1; margin-bottom: 24px; }
    .hero h1 em { font-style: italic; color: var(--color-green); }
    .hero-tagline { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-style: italic; color: var(--color-brown); margin-bottom: 32px; }
    .hero-description { font-size: 1.1rem; color: var(--color-text-muted); max-width: 500px; margin: 0 auto 40px; }
    .hobby-pills { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
    .hobby-pill { padding: 10px 20px; background: var(--color-white); border: 1px solid var(--color-border); border-radius: 50px; font-size: 0.9rem; color: var(--color-text-muted); cursor: pointer; transition: all var(--transition); }
    .hobby-pill:hover { border-color: var(--color-green); color: var(--color-green); transform: translateY(-2px); box-shadow: var(--shadow-sm); }

    .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
    .card { background: var(--color-white); border-radius: var(--radius); padding: 28px; border: 1px solid var(--color-border); transition: all var(--transition); }
    .card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
    .card h3 { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--color-green-dark); margin-bottom: 8px; }
    .card-subtitle { font-style: italic; color: var(--color-text-muted); font-size: 0.9rem; margin-bottom: 16px; }
    .card ul { list-style: none; }
    .card li { position: relative; padding-left: 16px; margin-bottom: 6px; font-size: 0.9rem; color: var(--color-text-muted); }
    .card li::before { content: '‚ô™'; position: absolute; left: 0; color: var(--color-green-light); }

    .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 48px; }
    .stat-card { text-align: center; padding: 28px 20px; background: var(--color-white); border-radius: var(--radius); border: 1px solid var(--color-border); }
    .stat-number { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--color-green); line-height: 1; margin-bottom: 8px; }
    .stat-label { font-size: 0.8rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.1em; }

    .reading-goal { background: var(--color-white); border-radius: var(--radius); padding: 32px; margin-bottom: 40px; border: 1px solid var(--color-border); text-align: center; }
    .goal-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--color-brown); margin-bottom: 12px; }
    .goal-number { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--color-green-dark); margin-bottom: 8px; }
    .goal-number span { color: var(--color-green); }
    .progress-bar { background: var(--color-border); height: 8px; border-radius: 4px; max-width: 400px; margin: 16px auto; overflow: hidden; }
    .progress-fill { background: linear-gradient(90deg, var(--color-green) 0%, var(--color-green-light) 100%); height: 100%; border-radius: 4px; transition: width 0.5s ease; }
    .goal-subtitle { font-size: 0.9rem; color: var(--color-text-muted); }

    .book-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 16px; }
    .book-card { background: var(--color-white); border-radius: var(--radius); padding: 16px; border: 1px solid var(--color-border); transition: all var(--transition); }
    .book-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-sm); }
    .book-title { font-weight: 600; color: var(--color-text); font-size: 0.9rem; margin-bottom: 4px; }
    .book-author { font-size: 0.8rem; color: var(--color-text-muted); }
    .book-status { font-size: 0.75rem; color: var(--color-text-light); margin-top: 8px; }
    .section-title { font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--color-green-dark); margin-bottom: 20px; }

    .carousel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; margin-top: 48px; }
    .carousel-nav { display: flex; align-items: center; gap: 12px; }
    .carousel-btn { width: 36px; height: 36px; border-radius: 50%; border: 1px solid var(--color-border); background: var(--color-white); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all var(--transition); }
    .carousel-btn:hover { background: var(--color-green); border-color: var(--color-green); }
    .carousel-btn:hover svg { stroke: var(--color-white); }
    .carousel-btn svg { stroke: var(--color-text-muted); }
    .carousel-indicator { font-size: 0.85rem; color: var(--color-text-muted); }
    .carousel-slide { display: none; }
    .carousel-slide.active { display: block; animation: fadeIn 0.3s ease; }
    .slide-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--color-border); cursor: pointer; transition: opacity var(--transition); }
    .slide-header:hover { opacity: 0.7; }
    .rating-stars { font-size: 1.2rem; color: var(--color-brown); }
    .rating-label { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--color-green-dark); }
    .rating-count { font-size: 0.8rem; color: var(--color-text-muted); background: var(--color-bg-alt); padding: 4px 12px; border-radius: 50px; }
    .view-all-hint { font-size: 0.75rem; color: var(--color-green); margin-left: auto; }
    .carousel-dots { display: flex; justify-content: center; gap: 8px; margin-top: 24px; }
    .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--color-border); cursor: pointer; transition: all var(--transition); }
    .dot:hover { background: var(--color-green-light); }
    .dot.active { background: var(--color-green); width: 24px; border-radius: 4px; }

    /* Modal Styles */
    .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
    .modal-overlay.active { display: flex; }
    .modal { background: var(--color-white); border-radius: var(--radius); max-width: 700px; width: 100%; max-height: 80vh; overflow: hidden; animation: modalIn 0.3s ease; }
    @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    .modal-header { padding: 24px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; }
    .modal-title { font-family: 'Great Vibes', cursive; font-size: 1.8rem; color: var(--color-green-dark); }
    .modal-close { width: 36px; height: 36px; border-radius: 50%; border: none; background: var(--color-bg-alt); cursor: pointer; font-size: 1.2rem; color: var(--color-text-muted); transition: all var(--transition); }
    .modal-close:hover { background: var(--color-green); color: var(--color-white); }
    .modal-body { padding: 24px; overflow-y: auto; max-height: calc(80vh - 80px); }
    .modal-book-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
    .modal-book { padding: 12px; background: var(--color-bg-alt); border-radius: var(--radius-sm); }
    .modal-book-title { font-weight: 600; font-size: 0.9rem; color: var(--color-text); }
    .modal-book-author { font-size: 0.8rem; color: var(--color-text-muted); }
    .modal-meta { font-size: 0.8rem; color: var(--color-text-muted); margin-bottom: 16px; }
    .modal-content { line-height: 1.8; }
    .modal-content h2 { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--color-green-dark); margin: 24px 0 12px; }
    .modal-content p { margin-bottom: 16px; }
    .modal-content ul, .modal-content ol { margin-left: 20px; margin-bottom: 16px; }
    .modal-image { width: 100%; max-height: 300px; object-fit: cover; border-radius: var(--radius-sm); margin-bottom: 16px; }

    /* Fitness Styles */
    .fitness-philosophy { background: linear-gradient(135deg, var(--color-green-pale) 0%, var(--color-cream) 100%); border-radius: var(--radius); padding: 32px; margin-bottom: 40px; text-align: center; }
    .fitness-philosophy p { font-family: 'Playfair Display', serif; font-style: italic; font-size: 1.1rem; color: var(--color-green-dark); max-width: 600px; margin: 0 auto; }
    .fitness-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; }
    .fitness-card { background: var(--color-white); border-radius: var(--radius); padding: 28px; border: 1px solid var(--color-border); }
    .fitness-card h3 { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--color-green-dark); margin-bottom: 8px; }
    .fitness-card .card-subtitle { font-style: italic; color: var(--color-text-muted); font-size: 0.9rem; margin-bottom: 16px; }
    .fitness-card h4 { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--color-brown); margin: 16px 0 8px; }
    .fitness-card ul { list-style: none; }
    .fitness-card li { position: relative; padding-left: 16px; margin-bottom: 6px; font-size: 0.9rem; color: var(--color-text-muted); }
    .fitness-card li::before { content: '‚Ä¢'; position: absolute; left: 0; color: var(--color-green-light); }
    .fitness-note { font-size: 0.85rem; font-style: italic; color: var(--color-text-muted); margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--color-border); }

    /* Photo Gallery */
    .photo-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; }
    .photo-item { background: linear-gradient(135deg, var(--color-green-pale) 0%, var(--color-cream) 50%, var(--color-brown-light) 100%); border-radius: var(--radius); aspect-ratio: 1; cursor: pointer; transition: all var(--transition); display: flex; align-items: center; justify-content: center; font-size: 3rem; position: relative; overflow: hidden; }
    .photo-item:hover { transform: scale(1.02); box-shadow: var(--shadow-lg); }
    .photo-item img { width: 100%; height: 100%; object-fit: cover; }
    .photo-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 16px; background: linear-gradient(transparent, rgba(0,0,0,0.7)); color: white; opacity: 0; transition: opacity var(--transition); }
    .photo-item:hover .photo-overlay { opacity: 1; }
    .photo-title { font-weight: 600; font-size: 0.9rem; }
    .photo-caption { font-size: 0.8rem; opacity: 0.8; }

    /* Journal */
    .journal-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; }
    .journal-entry { background: var(--color-white); border-radius: var(--radius); overflow: hidden; border: 1px solid var(--color-border); transition: all var(--transition); cursor: pointer; }
    .journal-entry:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
    .journal-image { height: 160px; background: linear-gradient(135deg, var(--color-green-pale) 0%, var(--color-cream) 100%); display: flex; align-items: center; justify-content: center; }
    .journal-image img { width: 100%; height: 100%; object-fit: cover; }
    .journal-image svg { width: 40px; height: 40px; stroke: var(--color-green); opacity: 0.5; }
    .journal-content { padding: 24px; }
    .journal-date { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--color-brown); margin-bottom: 8px; }
    .journal-title { font-family: 'Playfair Display', serif; font-size: 1.2rem; color: var(--color-green-dark); margin-bottom: 10px; line-height: 1.3; }
    .journal-excerpt { font-size: 0.9rem; color: var(--color-text-muted); margin-bottom: 16px; }
    .journal-tags { display: flex; gap: 8px; flex-wrap: wrap; }
    .tag { font-size: 0.75rem; padding: 4px 12px; background: var(--color-green-pale); color: var(--color-green-dark); border-radius: 50px; }

    .footer-note { text-align: center; padding: 40px; color: var(--color-text-muted); font-size: 0.9rem; }
    .footer-note a { color: var(--color-green); }

    @media (max-width: 768px) {
      nav { padding: 12px 20px; }
      .nav-links { gap: 4px; }
      .nav-links a { padding: 6px 12px; font-size: 0.9rem; }
      .container { padding: 40px 20px; }
      .stats-row { grid-template-columns: 1fr; }
      .fitness-grid { grid-template-columns: 1fr; }
      .photo-gallery { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <nav>
    <span class="nav-logo" onclick="showPage('home')">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#4a6741"/>
        <path d="M50 25 C35 40, 30 60, 50 75 C70 60, 65 40, 50 25" fill="#d4e4cf"/>
        <path d="M50 35 L50 65" stroke="#2d3f28" stroke-width="3" stroke-linecap="round"/>
        <path d="M50 45 L40 55" stroke="#2d3f28" stroke-width="2" stroke-linecap="round"/>
        <path d="M50 55 L60 50" stroke="#2d3f28" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </span>
    <ul class="nav-links">
      <li><a onclick="showPage('home')" class="active" data-page="home">Home</a></li>
      <li><a onclick="showPage('piano')" data-page="piano">Piano</a></li>
      <li><a onclick="showPage('reading')" data-page="reading">Reading</a></li>
      <li><a onclick="showPage('fitness')" data-page="fitness">Fitness</a></li>
      <li><a onclick="showPage('photography')" data-page="photography">Photography</a></li>
      <li><a onclick="showPage('journal')" data-page="journal">Journal</a></li>
    </ul>
  </nav>

  <main>
    <!-- HOME PAGE -->
    <div class="page active" id="page-home">
      <div class="hero">
        <div class="hero-content">
          <p class="hero-greeting">Welcome to</p>
          <h1>My <em>Absolute</em> Field</h1>
          <p class="hero-tagline">Where passions grow & progress unfolds</p>
          <p class="hero-description">A personal space documenting my journey through music, books, fitness, and the art of capturing moments.</p>
          <div class="hobby-pills">
            <span class="hobby-pill" onclick="showPage('piano')">üéπ Piano</span>
            <span class="hobby-pill" onclick="showPage('reading')">üìö Reading</span>
            <span class="hobby-pill" onclick="showPage('fitness')">üí™ Fitness</span>
            <span class="hobby-pill" onclick="showPage('photography')">üì∑ Photography</span>
            <span class="hobby-pill" onclick="showPage('journal')">‚úçÔ∏è Journal</span>
          </div>
        </div>
      </div>
    </div>

    <!-- PIANO PAGE -->
    <div class="page" id="page-piano">
      <div class="container">
        <header class="page-header">
          <p class="page-label">Worship Keys Journey</p>
          <h1 class="page-title">Piano Training</h1>
        </header>
        <div class="cards-grid">
          <div class="card"><h3>Week 1 ‚Äî Foundation</h3><p class="card-subtitle">Common keys & basic chord shapes</p><ul><li>Master G and C major chords</li><li>Practice I-IV-V-vi progressions</li><li>Learn "Good Good Father" & "Way Maker"</li></ul></div>
          <div class="card"><h3>Week 2 ‚Äî Movement</h3><p class="card-subtitle">Inversions & voice leading</p><ul><li>First & second inversions</li><li>Smooth chord transitions</li><li>Add D major to repertoire</li></ul></div>
          <div class="card"><h3>Week 3 ‚Äî Color</h3><p class="card-subtitle">Extensions & rhythm patterns</p><ul><li>Sus4, sus2, add9 voicings</li><li>Whole-note pads & eighth-note patterns</li><li>Play along with recordings</li></ul></div>
          <div class="card"><h3>Week 4 ‚Äî Integration</h3><p class="card-subtitle">Dynamics & band playing</p><ul><li>Dynamic control through sections</li><li>Clean starts and endings</li><li>Run full song sets</li></ul></div>
        </div>
      </div>
    </div>

    <!-- READING PAGE -->
    <div class="page" id="page-reading">
      <div class="container">
        <header class="page-header">
          <p class="page-label">Currently Exploring</p>
          <h1 class="page-title">Reading List</h1>
        </header>
        <div id="reading-content">Loading...</div>
      </div>
    </div>

    <!-- FITNESS PAGE -->
    <div class="page" id="page-fitness">
      <div class="container">
        <header class="page-header">
          <p class="page-label">Strength & Consistency</p>
          <h1 class="page-title">Fitness Journey</h1>
        </header>
        <div id="fitness-content">Loading...</div>
      </div>
    </div>

    <!-- PHOTOGRAPHY PAGE -->
    <div class="page" id="page-photography">
      <div class="container">
        <header class="page-header">
          <p class="page-label">Through My Lens</p>
          <h1 class="page-title">Photography</h1>
        </header>
        <div class="photo-gallery" id="photo-gallery">Loading...</div>
      </div>
    </div>

    <!-- JOURNAL PAGE -->
    <div class="page" id="page-journal">
      <div class="container">
        <header class="page-header">
          <p class="page-label">Thoughts & Reflections</p>
          <h1 class="page-title">Journal</h1>
        </header>
        <div class="journal-grid" id="journal-grid">Loading...</div>
      </div>
    </div>
  </main>

  <!-- Book List Modal -->
  <div class="modal-overlay" id="bookModal" onclick="closeModal('bookModal', event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title" id="bookModalTitle">Books</h2>
        <button class="modal-close" onclick="closeModal('bookModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="modal-book-list" id="bookModalList"></div>
      </div>
    </div>
  </div>

  <!-- Content Modal (Journal/Photo) -->
  <div class="modal-overlay" id="contentModal" onclick="closeModal('contentModal', event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title" id="contentModalTitle">Title</h2>
        <button class="modal-close" onclick="closeModal('contentModal')">√ó</button>
      </div>
      <div class="modal-body" id="contentModalBody"></div>
    </div>
  </div>

  <script>
    // Data storage
    let readingData = null;
    let booksData = null;
    let fitnessData = null;
    let journalData = [];
    let photoData = [];

    // Load all data on page load
    document.addEventListener('DOMContentLoaded', () => {
      loadReadingData();
      loadBooksData();
      loadFitnessData();
      loadJournalData();
      loadPhotoData();
    });

    // Fetch functions
    async function loadReadingData() {
      try {
        const res = await fetch('data/reading.json');
        readingData = await res.json();
        renderReading();
      } catch (e) {
        console.error('Failed to load reading data:', e);
        document.getElementById('reading-content').innerHTML = '<p>Failed to load reading data.</p>';
      }
    }

    async function loadBooksData() {
      try {
        const res = await fetch('data/books.json');
        booksData = await res.json();
        renderReading(); // Re-render with books
      } catch (e) {
        console.error('Failed to load books data:', e);
      }
    }

    async function loadFitnessData() {
      try {
        const res = await fetch('data/fitness.json');
        fitnessData = await res.json();
        renderFitness();
      } catch (e) {
        console.error('Failed to load fitness data:', e);
        document.getElementById('fitness-content').innerHTML = '<p>Failed to load fitness data.</p>';
      }
    }

    async function loadJournalData() {
      try {
        const res = await fetch('data/journal.json');
        journalData = await res.json();
        renderJournal();
      } catch (e) {
        console.error('Failed to load journal data:', e);
        document.getElementById('journal-grid').innerHTML = '<p>No journal entries yet.</p>';
      }
    }

    async function loadPhotoData() {
      try {
        const res = await fetch('data/photography.json');
        photoData = await res.json();
        renderPhotos();
      } catch (e) {
        console.error('Failed to load photo data:', e);
        document.getElementById('photo-gallery').innerHTML = '<p>No photos yet.</p>';
      }
    }

    // Render Reading Section
    function renderReading() {
      if (!readingData) return;
      
      const progress = Math.round((readingData.books_read_2026 / readingData.goal_2026) * 100);
      const remaining = readingData.goal_2026 - readingData.books_read_2026;
      
      let html = `
        <div class="reading-goal">
          <p class="goal-label">2026 Reading Goal</p>
          <p class="goal-number"><span>${readingData.books_read_2026}</span> / ${readingData.goal_2026} books</p>
          <div class="progress-bar"><div class="progress-fill" style="width: ${progress}%"></div></div>
          <p class="goal-subtitle">${progress}% complete ¬∑ ${remaining} books to go</p>
        </div>
        
        <div class="stats-row">
          <div class="stat-card"><p class="stat-number">${readingData.total_read}</p><p class="stat-label">Books Read</p></div>
          <div class="stat-card"><p class="stat-number">${readingData.currently_reading_count}</p><p class="stat-label">Currently Reading</p></div>
          <div class="stat-card"><p class="stat-number">${readingData.tbr_count}</p><p class="stat-label">To Be Read</p></div>
        </div>
        
        <h3 class="section-title">Currently Reading</h3>
        <div class="book-list" style="margin-bottom: 32px;">
          ${readingData.currently_reading.map(b => `
            <div class="book-card"><p class="book-title">${b.title}</p><p class="book-author">${b.author}</p></div>
          `).join('')}
        </div>
      `;

      // Add carousel if books data loaded
      if (booksData) {
        const categories = Object.keys(booksData).filter(k => booksData[k].books && booksData[k].books.length > 0);
        
        html += `
          <div class="carousel-header">
            <h3 class="section-title" style="margin-bottom: 0;">Books by Rating</h3>
            <div class="carousel-nav">
              <button class="carousel-btn" onclick="changeSlide(-1)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
              <span class="carousel-indicator" id="carouselIndicator">1 / ${categories.length}</span>
              <button class="carousel-btn" onclick="changeSlide(1)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
            </div>
          </div>
          <div id="ratingCarousel">
            ${categories.map((cat, i) => `
              <div class="carousel-slide ${i === 0 ? 'active' : ''}">
                <div class="slide-header" onclick="openBookModal('${cat}')">
                  <span class="rating-stars">${booksData[cat].stars}</span>
                  <span class="rating-label">${booksData[cat].label}</span>
                  <span class="rating-count">${booksData[cat].books.length} books</span>
                  <span class="view-all-hint">Click to view all ‚Üí</span>
                </div>
                <div class="book-list">
                  ${booksData[cat].books.slice(0, 5).map(b => `
                    <div class="book-card"><p class="book-title">${b.title}</p><p class="book-author">${b.author}</p></div>
                  `).join('')}
                </div>
              </div>
            `).join('')}
          </div>
          <div class="carousel-dots">
            ${categories.map((_, i) => `<span class="dot ${i === 0 ? 'active' : ''}" onclick="goToSlide(${i})"></span>`).join('')}
          </div>
        `;
        
        // Update totalSlides
        window.totalSlides = categories.length;
      }
      
      html += `<p class="footer-note">Data from <a href="https://app.thestorygraph.com" target="_blank">Storygraph</a> ¬∑ Last updated ${readingData.last_updated}</p>`;
      
      document.getElementById('reading-content').innerHTML = html;
    }

    // Render Fitness Section
    function renderFitness() {
      if (!fitnessData) return;
      
      const html = `
        <div class="fitness-philosophy">
          <p>${fitnessData.philosophy}</p>
        </div>
        
        <div class="fitness-grid">
          <div class="fitness-card">
            <h3>${fitnessData.monday.title}</h3>
            <p class="card-subtitle">${fitnessData.monday.subtitle} ¬∑ ${fitnessData.monday.duration}</p>
            <h4>Upper Body</h4>
            <ul>${fitnessData.monday.upper.map(e => `<li>${e}</li>`).join('')}</ul>
            <h4>Lower Body</h4>
            <ul>${fitnessData.monday.lower.map(e => `<li>${e}</li>`).join('')}</ul>
          </div>
          
          <div class="fitness-card">
            <h3>${fitnessData.tuesday.title}</h3>
            <p class="card-subtitle">${fitnessData.tuesday.subtitle} ¬∑ ${fitnessData.tuesday.duration}</p>
            <h4>Cardio Options</h4>
            <ul>${fitnessData.tuesday.cardio.map(e => `<li>${e}</li>`).join('')}</ul>
            <h4>Core Circuit</h4>
            <ul>${fitnessData.tuesday.core.map(e => `<li>${e}</li>`).join('')}</ul>
          </div>
          
          <div class="fitness-card">
            <h3>${fitnessData.wednesday.title}</h3>
            <p class="card-subtitle">${fitnessData.wednesday.subtitle} ¬∑ ${fitnessData.wednesday.duration}</p>
            <h4>Upper Body</h4>
            <ul>${fitnessData.wednesday.upper.map(e => `<li>${e}</li>`).join('')}</ul>
            <h4>Lower Body</h4>
            <ul>${fitnessData.wednesday.lower.map(e => `<li>${e}</li>`).join('')}</ul>
          </div>
          
          <div class="fitness-card">
            <h3>${fitnessData.thursday.title}</h3>
            <p class="card-subtitle">${fitnessData.thursday.subtitle} ¬∑ ${fitnessData.thursday.duration}</p>
            <h4>Cardio Options</h4>
            <ul>${fitnessData.thursday.cardio.map(e => `<li>${e}</li>`).join('')}</ul>
            <h4>Core Circuit</h4>
            <ul>${fitnessData.thursday.core.map(e => `<li>${e}</li>`).join('')}</ul>
          </div>
          
          <div class="fitness-card">
            <h3>${fitnessData.friday.title}</h3>
            <p class="card-subtitle">${fitnessData.friday.subtitle} ¬∑ ${fitnessData.friday.duration}</p>
            <h4>Compound Movements</h4>
            <ul>${fitnessData.friday.compound.map(e => `<li>${e}</li>`).join('')}</ul>
            <h4>Accessory Work</h4>
            <ul>${fitnessData.friday.accessory.map(e => `<li>${e}</li>`).join('')}</ul>
          </div>
          
          <div class="fitness-card">
            <h3>${fitnessData.weekend.title}</h3>
            <p class="card-subtitle">${fitnessData.weekend.subtitle}</p>
            <h4>Activities</h4>
            <ul>${fitnessData.weekend.activities.map(e => `<li>${e}</li>`).join('')}</ul>
            <p class="fitness-note">${fitnessData.weekend.note}</p>
          </div>
        </div>
        
        <p class="footer-note" style="margin-top: 40px; font-style: italic;">"${fitnessData.closing_quote}"</p>
      `;
      
      document.getElementById('fitness-content').innerHTML = html;
    }

    // Render Journal
    function renderJournal() {
      if (!journalData || journalData.length === 0) {
        document.getElementById('journal-grid').innerHTML = '<p>No journal entries yet.</p>';
        return;
      }
      
      const html = journalData.map((entry, idx) => `
        <article class="journal-entry" onclick="openJournalModal(${idx})">
          <div class="journal-image">
            ${entry.image ? `<img src="${entry.image}" alt="${entry.title}">` : 
              `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/></svg>`}
          </div>
          <div class="journal-content">
            <p class="journal-date">${formatDate(entry.date)}</p>
            <h3 class="journal-title">${entry.title}</h3>
            <p class="journal-excerpt">${entry.excerpt}</p>
            <div class="journal-tags">${entry.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
          </div>
        </article>
      `).join('');
      
      document.getElementById('journal-grid').innerHTML = html;
    }

    // Render Photos
    function renderPhotos() {
      if (!photoData || photoData.length === 0) {
        document.getElementById('photo-gallery').innerHTML = `
          <div class="photo-item">üåø</div>
          <div class="photo-item">‚òï</div>
          <div class="photo-item">üì∑</div>
          <div class="photo-item">üèîÔ∏è</div>
        `;
        return;
      }
      
      const emojis = ['üåø', '‚òï', 'üì∑', 'üèîÔ∏è', 'üåÖ', 'üéπ', 'üìö'];
      
      const html = photoData.map((photo, idx) => `
        <div class="photo-item" onclick="openPhotoModal(${idx})">
          ${photo.image ? `<img src="${photo.image}" alt="${photo.title}">` : emojis[idx % emojis.length]}
          <div class="photo-overlay">
            <p class="photo-title">${photo.title}</p>
            <p class="photo-caption">${photo.caption}</p>
          </div>
        </div>
      `).join('');
      
      document.getElementById('photo-gallery').innerHTML = html;
    }

    // Helper: Format date
    function formatDate(dateStr) {
      const d = new Date(dateStr);
      return d.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    // Page navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
      document.getElementById('page-' + pageId).classList.add('active');
      document.querySelector('[data-page="' + pageId + '"]').classList.add('active');
    }

    // Carousel
    let currentSlide = 0;
    let totalSlides = 7;
    
    function changeSlide(dir) {
      currentSlide = (currentSlide + dir + totalSlides) % totalSlides;
      updateCarousel();
    }
    
    function goToSlide(idx) {
      currentSlide = idx;
      updateCarousel();
    }
    
    function updateCarousel() {
      document.querySelectorAll('.carousel-slide').forEach((s, i) => s.classList.toggle('active', i === currentSlide));
      document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === currentSlide));
      const indicator = document.getElementById('carouselIndicator');
      if (indicator) indicator.textContent = (currentSlide + 1) + ' / ' + totalSlides;
    }

    // Modal functions
    function openBookModal(category) {
      if (!booksData || !booksData[category]) return;
      const data = booksData[category];
      document.getElementById('bookModalTitle').textContent = data.title;
      document.getElementById('bookModalList').innerHTML = data.books.map(b => 
        `<div class="modal-book"><p class="modal-book-title">${b.title}</p><p class="modal-book-author">${b.author}</p></div>`
      ).join('');
      document.getElementById('bookModal').classList.add('active');
    }

    function openJournalModal(idx) {
      if (!journalData || !journalData[idx]) return;
      const entry = journalData[idx];
      document.getElementById('contentModalTitle').textContent = entry.title;
      
      let html = `<p class="modal-meta">${formatDate(entry.date)} ¬∑ ${entry.tags.map(t => `<span class="tag">${t}</span>`).join(' ')}</p>`;
      if (entry.image) html += `<img class="modal-image" src="${entry.image}" alt="${entry.title}">`;
      html += `<div class="modal-content">${typeof marked !== 'undefined' ? marked.parse(entry.body) : entry.body.replace(/\n/g, '<br>')}</div>`;
      
      document.getElementById('contentModalBody').innerHTML = html;
      document.getElementById('contentModal').classList.add('active');
    }

    function openPhotoModal(idx) {
      if (!photoData || !photoData[idx]) return;
      const photo = photoData[idx];
      document.getElementById('contentModalTitle').textContent = photo.title;
      
      let html = `<p class="modal-meta">${formatDate(photo.date)} ¬∑ ${photo.category}</p>`;
      if (photo.image) html += `<img class="modal-image" src="${photo.image}" alt="${photo.title}">`;
      html += `<p>${photo.caption}</p>`;
      
      document.getElementById('contentModalBody').innerHTML = html;
      document.getElementById('contentModal').classList.add('active');
    }

    function closeModal(modalId, e) {
      if (!e || e.target.classList.contains('modal-overlay')) {
        document.getElementById(modalId).classList.remove('active');
      }
    }

    // ESC key closes modals
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
      }
    });

    // Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; });
      });
    }
  </script>
</body>
</html>
